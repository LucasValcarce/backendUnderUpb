<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Answers</title>
    <link rel="stylesheet" href="/styles.css">
    <script src="/app.js"></script>
</head>
<body>
<div class="container">
    <h1>Answers</h1>
    <div class="card">
        <h2>Create Answer</h2>
        <div class="form-group">
            <label>Question ID</label>
            <input type="number" id="create-a-qid" placeholder="Question ID">
        </div>
        <div class="form-group">
            <label>Text</label>
            <input type="text" id="create-a-text" placeholder="Answer text">
        </div>
        <div class="form-row">
            <div class="form-group">
                <label>Is Correct</label>
                <select id="create-a-correct">
                    <option value="false">False</option>
                    <option value="true">True</option>
                </select>
            </div>
            <div class="form-group">
                <label>Explanation</label>
                <input type="text" id="create-a-expl" placeholder="Explanation (optional)">
            </div>
        </div>
        <button class="btn btn-primary" onclick="sendRequest('POST', '/api/v1/answers', {
            questionId: parseInt(document.getElementById('create-a-qid').value),
            text: document.getElementById('create-a-text').value,
            isCorrect: document.getElementById('create-a-correct').value === 'true',
            explanation: document.getElementById('create-a-expl').value
        }, 'create-answer-response')">Create Answer</button>
        <div id="create-answer-response"></div>
    </div>

    <div class="card">
        <h2>List Answers by Question</h2>
        <div class="form-row">
            <div class="form-group">
                <label>Question ID</label>
                <input type="number" id="list-a-qid" placeholder="Question ID">
            </div>
            <div class="form-group">
                <label>Page</label>
                <input type="number" id="list-a-page" value="0">
            </div>
        </div>
        <button class="btn" onclick="loadAnswers()">Load Answers</button>
        <div id="answers-list"></div>
    </div>
</div>

<script>
    function loadAnswers() {
        const qid = parseInt(document.getElementById('list-a-qid').value);
        const page = parseInt(document.getElementById('list-a-page').value || 0);
        if (!qid) {
            document.getElementById('answers-list').innerText = 'Provide a question id';
            return;
        }
        sendRequest('GET', `/api/v1/answers/questions/${qid}?page=${page}&size=20`, null, 'answers-list');
    }
</script>
</body>
</html>